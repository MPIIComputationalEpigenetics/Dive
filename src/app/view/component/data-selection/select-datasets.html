<p-sidebar [(visible)]="visibleSidebar" position="right" [baseZIndex]="20000" styleClass="ui-sidebar-md">
  <h1 style="font-weight:normal">{{selectedRow?.text()}}</h1>
  <p-scrollPanel [style]="{height: '95%', width: '100%'}">
    <button pButton type="button" icon="ui-icon-check-circle" label="Select Dataset" (click)="selectDatasets($event)"></button>
    <button pButton type="button" (click)="visibleSidebar = false" label="Cancel" class="ui-button-secondary"></button>

    <div *ngIf="!selectedRow">
      <h3>Loading dataset information...</h3>
    </div>
    <div *ngIf="selectedRow">
      <h4>{{ selectedRow?.epigenetic_mark() }}</h4>
      <h4>{{ selectedRow?.biosource() }}</h4>
      <h4>{{ selectedRow?.sample_info() | json }}</h4>
      <h4>{{ selectedRow?.technique() }}</h4>
      <h4>{{ selectedRow?.project() }}</h4>
      <h4>{{ selectedRow?.columns() | json }}</h4>
      <query-flow [queryId]="clicked_query_id"></query-flow>
    </div>

  </p-scrollPanel>
</p-sidebar>

<input type='text' style='padding:8px;margin:15px auto;width:30%;' placeholder='Type to filter datasets' [(ngModel)]="filterText" (keyup)='updateFilter($event)' />
<div class="content-section implementation">

  <p-treeTable [value]="datasetTreeNodes" 
    selectionMode="single" 
    [(selection)]="selectedDatasets" 
    (onNodeSelect)="nodeSelect($event)"> 

      <ng-template pTemplate="header">
          <tr>
              <th>Name</th>
              <th>BioSource</th>
              <th>Epigenetic Mark</th>
              <th>Project</th>
          </tr>
      </ng-template>

      <ng-template pTemplate="body" let-rowNode let-rowData="rowData">
          <tr [ttRow]="rowNode" [ttSelectableRow]="rowNode">
              <td>
                <p-treeTableToggler [rowNode]="rowNode"></p-treeTableToggler>
                  {{rowData.name}}
              </td>
              <td>{{rowData.biosource}}</td>
              <td>{{rowData.epigeneticmark}}</td>
              <td>{{rowData.project}}</td>
          </tr>
      </ng-template>

  </p-treeTable>

</div>
